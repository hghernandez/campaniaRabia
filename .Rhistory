library(xlsx)
dat <- read.xlsx2("datos/formulario Salvador Mazza.xlsx",1)
dat
View(dat)
library(stringr)
paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(substring(dat$long_3_Ubicacin),sep="")
paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin),sep="")
substring(dat$long_3_Ubicacin,1,3)
paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
View(dat)
dat$lat <- paste(substring(dat$lat_3_Ubicacin,1,3),".",substring(dat$lat_3_Ubicacin,4,str_length(dat$lat_3_Ubicacin)),sep="")
View(dat)
str_split_fixed(dat$long,".")
str_split_fixed(dat$long,".","")
library(stringi)
library(stringr)
str_replace_all(dat$long,fixed(.))
if(dat$long_3_Ubicacin != NULL){}
if(dat$long_3_Ubicacin != NULL){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
dat$long_3_Ubicacin != NULL
dat$long_3_Ubicacin != ""
if(dat$long_3_Ubicacin != ""){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
if(dat$long_3_Ubicacin != "" == 'FALSE'){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
if((dat$long_3_Ubicacin != "") == FALSE){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
anyNA(dat$long_3_Ubicacin)
if(anyNA(dat$long_3_Ubicacin) != FALSE){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
if(anyNA(dat$long_3_Ubicacin) != FALSE){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
anyNA(dat$long_3_Ubicacin) != FALSE
any(dat$long_3_Ubicacin)
any(dat$long_3_Ubicacin) != FALSE
any(dat$long_3_Ubicacin == "")
any(dat$long_3_Ubicacin == NULL)
if(any(dat$long_3_Ubicacin == NULL)){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
all()
if(all(dat$long_3_Ubicacin != NULL)){
dat$long <- paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
}
all(dat$long_3_Ubicacin != NULL)
ifelse(dat$long_3_Ubicacin != NULL,paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")
ifelse(dat$long_3_Ubicacin == NULL, "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
dat$long_3_Ubicacin == NULL
ifelse(dat$long_3_Ubicacin == "", "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
dat$long <- ifelse(dat$long_3_Ubicacin == "", "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
dat$lat <- ifelse(dat$lat_3_Ubicacin == "", "NA",paste(substring(dat$lat_3_Ubicacin,1,3),".",substring(dat$lat_3_Ubicacin,4,str_length(dat$lat_3_Ubicacin)),sep=""))
View(dat)
library(rgdal)
mapaArg <- readOGR(dsn= "./argShape", layer= "pxprovdatos")
mapaArg
library(ggplot2)
argMapDT <- fortify(mapaArg, region= "link")
argMapDT
table(argMapDT$id)
l
library(dplyr)
argMapDT <- argMapDT %>%
filter(id== 66)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon()
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(colour= "white")
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(colour= "black")
ggplot(argMapDT, aes(long, lat, group= group, fill= "black"))+
geom_polygon()
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(aes(colour= "white"))
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(col = "black", fill = "white")
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(col = "black", fill = "white")+
geom_point(data = dat, aes(x =lon, y= lat,size = 4), alpha=0.5)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(col = "black", fill = "white")+
geom_point(data = dat, aes(x =lon, y= lat,size = 4), alpha=0.5, inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(col = "black", fill = "white")+
geom_point(data = dat, aes(x =long, y= lat,size = 4), alpha=0.5, inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(col = "black", fill = "white")+
geom_point(data = dat, aes(x =long, y= lat,size = 4), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white")+
geom_point(data = dat, aes(x =long, y= lat,size = 4), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white")+
geom_point(data = dat, aes(x =as.numierc(long), y= as.numeric(lat),size = 4), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 4), inherit.aes = FALSE)
summary(dat$long)
table(dat$long)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 1), inherit.aes = FALSE)
library(xlsx)
library(stringr)
library(rgdal)
library(ggplot2)
library(dplyr)
dat <- read.xlsx2("datos/formulario Salvador Mazza.xlsx",1)
dat$long <- ifelse(dat$long_3_Ubicacin == "", "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
dat$lat <- ifelse(dat$lat_3_Ubicacin == "", "NA",paste(substring(dat$lat_3_Ubicacin,1,3),".",substring(dat$lat_3_Ubicacin,4,str_length(dat$lat_3_Ubicacin)),sep=""))
mapaArg <- readOGR(dsn= "./argShapeDepto", layer= "pxdptodatosok")
argMapDT <- fortify(mapaArg, region= "link")
View(argMapDT)
argMapDT %>%
filter(substring(id,1,2) ==66)
argMapDT <- argMapDT %>%
filter(substring(id,1,2) ==66)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 1), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 1), inherit.aes = FALSE)
argMapDT <- argMapDT %>%
filter(id ==66056)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 1), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.05), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)
max(dat$lat)
max(dat$lat, na.rm=TRUE)
summary(dat$lat)
c(max(as.numeric(dat$lat)),min(as.numeric(dat$lat)))
max(as.numeric(dat$lat)
max(as.numeric(dat$lat))
max(as.numeric(dat$lat),na.rm=TRUE)
c(max(as.numeric(dat$lat),na.rm=TRUE),min(as.numeric(dat$lat),na.rm=TRUE))
paste(max(as.numeric(dat$lat),na.rm=TRUE),",",min(as.numeric(dat$lat),na.rm=TRUE),sep="")
ylim <- paste(max(as.numeric(dat$lat),na.rm=TRUE),",",min(as.numeric(dat$lat),na.rm=TRUE),sep="")
ylim
xlim <- paste(max(as.numeric(dat$long),na.rm=TRUE),",",min(as.numeric(dat$long),na.rm=TRUE),sep="")
xlim
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= xlin, ylim= ylim)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= xlim, ylim= ylim)
xlim
ylim
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)
ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))
depto <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))
library(gridExtra)
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob)
depto
depto +
annotation_custom(grob= zoom.grob, xmin = -60, xmax = -62, ymin = -24, ymax=-23)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.5, xmax = -63, ymin = -23.5, ymax=-23.0)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))+
theme_void()
zoom
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.5, xmax = -63, ymin = -23.5, ymax=-23.0)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.5, xmax = -62, ymin = -23.5, ymax=-23.0)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.5, xmax = -63, ymin = -23.5, ymax=-23.0)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.5, xmax = -63, ymin = -22.5, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.674513, xmax = -63, ymin = -22.5, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.674513, xmax = -63, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.674513, xmax = -63, ymin = -22.044541, ymax=-22.103759)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.674513, xmax = -63, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -63.674513, xmax = -64, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -65, xmax = -63.674513, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.5, xmax = -63.674513, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -22.044541, ymax=-23.5)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -20, ymax=-22)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -22, ymax=-23)
depto <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
guides(fill=FALSE)+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
guides(fill=FALSE)+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))+
theme_void()
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -22, ymax=-23)
depto <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
guides(fill=FALSE)
depto <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
guides(fill=FALSE)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat),size = 0.0001), inherit.aes = FALSE)+
guides(fill=FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))+
theme_void()
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -22, ymax=-23)
depto <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat)), inherit.aes = FALSE)+
guides(fill=FALSE)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat)), inherit.aes = FALSE)+
guides(fill=FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))+
theme_void()
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.2, xmax = -63.674513, ymin = -22, ymax=-23)
depto +
annotation_custom(grob= zoom.grob, xmin = -640, xmax = -63.2, ymin = -22, ymax=-23)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.0, xmax = -63.2, ymin = -22, ymax=-23)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.0, xmax = -63.2, ymin = -22.1, ymax=-23)
zoom <- ggplot(argMapDT, aes(long, lat, group= group))+
geom_polygon(fill = "white", col= "black")+
geom_point(data = dat, aes(x =as.numeric(long), y= as.numeric(lat)), inherit.aes = FALSE)+
guides(fill=FALSE)+
coord_fixed(xlim= c(-63.674513,-63.733885), ylim= c(-22.044541,-22.103759))+
theme_void()+
theme(panel.border = element_rect(linetype = "dashed", color = "grey20", fill = NA, size = 0.4))
zoom
zoom.grob <- ggplotGrob(zoom)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.0, xmax = -63.2, ymin = -22.1, ymax=-23)
depto +
annotation_custom(grob= zoom.grob, xmin = -64.0, xmax = -63.2, ymin = -22, ymax=-23)
install.packages("osmdata")
library(osmdata)
getbb("salvador mazza, Salta")
osm_polygons(p, id)
p <- getbb("salvador mazza, Salta",  format_out = "sf_polygon")
p
leaflet(p) %>%
addTiles() %>%
addPolygons()
p <- getbb("salvador mazza, Salta",  format_out = "polygon")
summary(p)
ggplot(p, aes(long, lat,))+
geom_polygon(fill = "white", col= "black")
pd <- fortify(p)
library(ggplot2)
pd <- fortify(p)
fortify(p)
install.packages("sf")
install.packages("leaflet")
library(sf)
library(leaflet)
p <- getbb("salvador mazza, Salta",  format_out = "sf_polygon")
leaflet(p) %>%
addTiles() %>%
addPolygons()
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat)
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat))
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat))
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat)) %>%
addControl(title, position = "topleft")
title <- tags$div(
tag.map.title, HTML("Map title")
)
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat)) %>%
addControl(title, position = "topleft")
tag.map.title <- tags$style(HTML("
.leaflet-control.map-title {
transform: translate(-50%,20%);
position: fixed !important;
left: 50%;
text-align: center;
padding-left: 10px;
padding-right: 10px;
background: rgba(255,255,255,0.75);
font-weight: bold;
font-size: 28px;
}
"))
title <- tags$div(
tag.map.title, HTML("Map title")
)
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat)) %>%
addControl(title, position = "topleft")
title <- tags$div(
tag.map.title, HTML("Map title")
)
datos<- opq(p) %>%
add_osm_feature(key = "highway")
datos
datos <- datos %>%
osmdata_sf()
datos
calles <- datos$osm_lines
calles
ggplot() +
geom_sf(data = calles)
install.packages("mapview")
pp <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat)) %>%
addControl(title, position = "topleft")
mapshot(pp, file = "C:/Users/Gabriela/Desktop/prueba.png")
library(mapview)
mapshot(pp, file = "C:/Users/Gabriela/Desktop/prueba.png")
pp <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat)) %>%
addControl(title, position = "topleft")
pp <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat))
mapshot(pp, file = "C:/Users/Gabriela/Desktop/prueba.png")
p <- getbb("salvador mazza, Salta",  format_out = "sf_polygon")
dat_sp <- as(p, 'Spatial')
dat_sp
ggplot(dat_sp, aes(long,lat))+
geom_polygon()
ggplot(dat_sp, aes(long,lat))+
geom_polygon(colour="black")
ggplot(dat_sp, aes(long,lat))+
geom_polygon(colour="black", col= "white")
ggplot(dat_sp, aes(long,lat))+
geom_polygon(colour="black", fill= "white")
pp <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat))
pp
library(xlsx)
library(stringr)
library(rgdal)
library(ggplot2)
library(dplyr)
library(gridExtra)
dat <- read.xlsx2("datos/formulario Salvador Mazza.xlsx",1)
dat$long <- ifelse(dat$long_3_Ubicacin == "", "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep=""))
dat$lat <- ifelse(dat$lat_3_Ubicacin == "", "NA",paste(substring(dat$lat_3_Ubicacin,1,3),".",substring(dat$lat_3_Ubicacin,4,str_length(dat$lat_3_Ubicacin)),sep=""))
dat$long <- as.numeric(ifelse(dat$long_3_Ubicacin == "", "NA",paste(substring(dat$long_3_Ubicacin,1,3),".",substring(dat$long_3_Ubicacin,4,str_length(dat$long_3_Ubicacin)),sep="")))
dat$lat <- as.numeric(ifelse(dat$lat_3_Ubicacin == "", "NA",paste(substring(dat$lat_3_Ubicacin,1,3),".",substring(dat$lat_3_Ubicacin,4,str_length(dat$lat_3_Ubicacin)),sep="")))
dat$long
library
##Armo mapa interactivo con los datos de la Campaña de rabia
library(osmdata)
library(sf)
library(leaflet)
library(mapview)
mapSM <- getbb("salvador mazza, Salta",  format_out = "sf_polygon")
mapSM
mapaTematico <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(as.numeric(dat$long),as.numeric(dat$lat))
mapaTematico
mapaTematico <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat)
mapaTematico
mapaTematico <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ sqrt(dat$X8_Total_de_perros_va))
mapaTematico <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ dat$X8_Total_de_perros_va)
mapaTematico
mapaTematico <- leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va))
mapaTematico
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va), fillColor = "Blue")
leaflet(p) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va), fillColor = "blues")
leaflet(mapSM) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va), fillColor = "red")
leaflet(mapSM) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va), fillColor = "blue")
dat %>%
filter(X6_Ingres_a_la_vivien == "si")
dat
dat %>%
filter(X6_Ingres_a_la_vivien == "Si" & X7_Tiene_perros != "")
dat <- dat %>%
filter(X6_Ingres_a_la_vivien == "Si" & X7_Tiene_perros != "")
View(dat)
##Armo mapa interactivo con los datos de la Campaña de rabia
library(osmdata)
library(sf)
library(leaflet)
library(mapview)
mapSM <- getbb("salvador mazza, Salta",  format_out = "sf_polygon")
mapaTematico <- leaflet(mapSM) %>%
addTiles() %>%
addPolygons() %>%
addCircles(dat$long,dat$lat, radius= ~ as.numeric(dat$X8_Total_de_perros_va), fillColor = "blue")
mapaTematico
